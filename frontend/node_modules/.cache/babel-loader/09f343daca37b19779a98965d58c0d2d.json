{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\letsTravel\\\\frontend\\\\src\\\\components\\\\login-modal\\\\login-modal.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport ContextApi from '../../context-api/context-api';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from \"yup\";\nimport { useForm } from 'react-hook-form'; // import { useHistory } from 'react-router-dom';\n\nimport { useNavigate } from 'react-router-dom';\nimport { Credslogin, CredsRegister } from '../../api-service/api-service';\nimport { ToastContainer, toast } from 'react-toastify';\n\nconst LoginModal = props => {\n  var _errors$email, _errors$password, _errors$email2, _errors$password2, _errors$name, _errors$mobile;\n\n  const {\n    dispatchUserEvent,\n    state\n  } = useContext(ContextApi);\n  const history = useHistory();\n  const schema = yup.object({\n    email: yup.string().required('Please enter Email'),\n    password: yup.string().required('Please enter Password'),\n    name: state.label === 'register' && yup.string().required('Please enter Name'),\n    mobile: state.label === 'register' && yup.string().required('Please enter Mobile Number')\n  }).required();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  const closeModal = () => {\n    if (state.login) dispatchUserEvent('LOGIN', {\n      login: false\n    });else dispatchUserEvent('REGISTER', {\n      register: false\n    });\n  };\n\n  const loginForm = async data => {\n    console.log(data);\n    let response;\n\n    if (state.label === 'login') {\n      response = await Credslogin(data);\n\n      if (response) {\n        if (response.status === 200) {\n          dispatchUserEvent('LOGIN', {\n            login: false\n          });\n          localStorage.setItem('user_data', JSON.stringify(response.data));\n          history.push(`${state.path}`);\n          props.handleSnack({\n            snack: true,\n            message: 'LogIn successfully',\n            class: 'success'\n          });\n          dispatchUserEvent('LOGIN', {\n            login: false\n          });\n        } else {\n          props.handleSnack({\n            snack: true,\n            message: 'Please SignUp',\n            class: 'error'\n          });\n        }\n      } else {\n        props.handleSnack({\n          snack: true,\n          message: 'Invalid Username & Password',\n          class: 'error'\n        });\n      }\n    } else {\n      response = await CredsRegister(data);\n\n      if (response) {\n        if (response.status === 200) {\n          dispatchUserEvent('REGISTER', {\n            register: false\n          });\n          history.push(`${state.path}`);\n          props.handleSnack({\n            snack: true,\n            message: 'User created successfully',\n            class: 'success'\n          });\n          dispatchUserEvent('REGISTER', {\n            register: false\n          });\n        } else {\n          props.handleSnack({\n            snack: true,\n            message: 'Error, Kindly login again after sometime.',\n            class: 'error'\n          });\n        }\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-backdrop fade show\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: `modal ${state.login || state.register ? 'd-block' : 'fade'}`,\n    id: \"exampleModal\",\n    backdrop: \"static\",\n    tabIndex: \"-1\",\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog modal-dialog-centered\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn-close\",\n    \"data-bs-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    onClick: closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center my-3 login-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 33\n    }\n  }, \"Lets Travel\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 33\n    }\n  }, \"Think for a budget friendly rooms and we are here to make it happen\")), state.login ? /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(loginForm),\n    className: \"form-login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({}, register(\"email\"), {\n    type: \"email\",\n    className: \"form-control\",\n    id: \"exampleInputEmail1\",\n    placeholder: \"Enter Email\",\n    \"aria-describedby\": \"emailHelp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 45\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    className: errors.email && 'log-error',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 45\n    }\n  }, (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({}, register(\"password\"), {\n    type: \"password\",\n    className: \"form-control\",\n    id: \"exampleInputPassword1\",\n    placeholder: \"Enter Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 45\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    className: errors.password && 'log-error',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 45\n    }\n  }, (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 45\n    }\n  }, \"Forgot Password?\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary btn-login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 45\n    }\n  }, \"Log In\"))) : /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(loginForm),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({}, register(\"email\"), {\n    type: \"email\",\n    className: \"form-control\",\n    id: \"exampleInputEmail1\",\n    \"aria-describedby\": \"emailHelp\",\n    placeholder: \"Enter Email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    className: errors.email && 'log-error',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 41\n    }\n  }, (_errors$email2 = errors.email) === null || _errors$email2 === void 0 ? void 0 : _errors$email2.message)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({}, register(\"password\"), {\n    type: \"password\",\n    className: \"form-control\",\n    id: \"exampleInputPassword1\",\n    placeholder: \"Enter Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    className: errors.password && 'log-error',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 41\n    }\n  }, (_errors$password2 = errors.password) === null || _errors$password2 === void 0 ? void 0 : _errors$password2.message)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({}, register(\"name\"), {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"exampleInputPassword1\",\n    placeholder: \"Enter Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    className: errors.name && 'log-error',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 41\n    }\n  }, (_errors$name = errors.name) === null || _errors$name === void 0 ? void 0 : _errors$name.message)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({}, register(\"mobile\"), {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"exampleInputPassword1\",\n    placeholder: \"Enter Mobile Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    className: errors.mobile && 'log-error',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 41\n    }\n  }, (_errors$mobile = errors.mobile) === null || _errors$mobile === void 0 ? void 0 : _errors$mobile.message)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 41\n    }\n  }, \"Sign Up\"))))))));\n};\n\nexport default LoginModal;","map":{"version":3,"sources":["C:/Users/admin/Desktop/letsTravel/frontend/src/components/login-modal/login-modal.js"],"names":["React","useContext","useEffect","useState","ContextApi","yupResolver","yup","useForm","useNavigate","Credslogin","CredsRegister","ToastContainer","toast","LoginModal","props","dispatchUserEvent","state","history","useHistory","schema","object","email","string","required","password","name","label","mobile","register","handleSubmit","formState","errors","resolver","closeModal","login","loginForm","data","console","log","response","status","localStorage","setItem","JSON","stringify","push","path","handleSnack","snack","message","class"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAqD,OAArD;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAASC,OAAT,QAAwB,iBAAxB,C,CACA;;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,UAAT,EAAqBC,aAArB,QAA0C,+BAA1C;AACA,SAASC,cAAT,EAAyBC,KAAzB,QAAsC,gBAAtC;;AAEA,MAAMC,UAAU,GAAIC,KAAD,IAAW;AAAA;;AAE1B,QAAM;AAAEC,IAAAA,iBAAF;AAAqBC,IAAAA;AAArB,MAA+Bf,UAAU,CAACG,UAAD,CAA/C;AACA,QAAMa,OAAO,GAAGC,UAAU,EAA1B;AACA,QAAMC,MAAM,GAAGb,GAAG,CAACc,MAAJ,CAAW;AACtBC,IAAAA,KAAK,EAAEf,GAAG,CAACgB,MAAJ,GAAaC,QAAb,CAAsB,oBAAtB,CADe;AAEtBC,IAAAA,QAAQ,EAAElB,GAAG,CAACgB,MAAJ,GAAaC,QAAb,CAAsB,uBAAtB,CAFY;AAGtBE,IAAAA,IAAI,EAAET,KAAK,CAACU,KAAN,KAAgB,UAAhB,IAA8BpB,GAAG,CAACgB,MAAJ,GAAaC,QAAb,CAAsB,mBAAtB,CAHd;AAItBI,IAAAA,MAAM,EAAEX,KAAK,CAACU,KAAN,KAAgB,UAAhB,IAA8BpB,GAAG,CAACgB,MAAJ,GAAaC,QAAb,CAAsB,4BAAtB;AAJhB,GAAX,EAKZA,QALY,EAAf;AAOA,QAAM;AAAEK,IAAAA,QAAF;AAAYC,IAAAA,YAAZ;AAA2BC,IAAAA,SAAS,EAAC;AAAEC,MAAAA;AAAF;AAArC,MAAmDxB,OAAO,CAAC;AAC7DyB,IAAAA,QAAQ,EAAE3B,WAAW,CAACc,MAAD;AADwC,GAAD,CAAhE;;AAIA,QAAMc,UAAU,GAAG,MAAM;AACrB,QAAIjB,KAAK,CAACkB,KAAV,EAAiBnB,iBAAiB,CAAC,OAAD,EAAU;AAAEmB,MAAAA,KAAK,EAAE;AAAT,KAAV,CAAjB,CAAjB,KACKnB,iBAAiB,CAAC,UAAD,EAAa;AAAEa,MAAAA,QAAQ,EAAE;AAAZ,KAAb,CAAjB;AACR,GAHD;;AAKA,QAAMO,SAAS,GAAG,MAAOC,IAAP,IAAgB;AAC9BC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,QAAIG,QAAJ;;AACA,QAAIvB,KAAK,CAACU,KAAN,KAAgB,OAApB,EAA6B;AACzBa,MAAAA,QAAQ,GAAG,MAAM9B,UAAU,CAAC2B,IAAD,CAA3B;;AACA,UAAIG,QAAJ,EAAc;AACV,YAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AACzBzB,UAAAA,iBAAiB,CAAC,OAAD,EAAU;AAAEmB,YAAAA,KAAK,EAAE;AAAT,WAAV,CAAjB;AACAO,UAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCC,IAAI,CAACC,SAAL,CAAeL,QAAQ,CAACH,IAAxB,CAAlC;AACAnB,UAAAA,OAAO,CAAC4B,IAAR,CAAc,GAAE7B,KAAK,CAAC8B,IAAK,EAA3B;AACAhC,UAAAA,KAAK,CAACiC,WAAN,CAAkB;AAAEC,YAAAA,KAAK,EAAE,IAAT;AAAeC,YAAAA,OAAO,EAAE,oBAAxB;AAA8CC,YAAAA,KAAK,EAAE;AAArD,WAAlB;AACAnC,UAAAA,iBAAiB,CAAC,OAAD,EAAU;AAAEmB,YAAAA,KAAK,EAAE;AAAT,WAAV,CAAjB;AACH,SAND,MAMO;AACHpB,UAAAA,KAAK,CAACiC,WAAN,CAAkB;AAAEC,YAAAA,KAAK,EAAE,IAAT;AAAeC,YAAAA,OAAO,EAAE,eAAxB;AAAyCC,YAAAA,KAAK,EAAE;AAAhD,WAAlB;AACH;AACJ,OAVD,MAUO;AACHpC,QAAAA,KAAK,CAACiC,WAAN,CAAkB;AAAEC,UAAAA,KAAK,EAAE,IAAT;AAAeC,UAAAA,OAAO,EAAE,6BAAxB;AAAuDC,UAAAA,KAAK,EAAE;AAA9D,SAAlB;AACH;AACJ,KAfD,MAeO;AACHX,MAAAA,QAAQ,GAAG,MAAM7B,aAAa,CAAC0B,IAAD,CAA9B;;AACA,UAAIG,QAAJ,EAAc;AACV,YAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AACzBzB,UAAAA,iBAAiB,CAAC,UAAD,EAAa;AAAEa,YAAAA,QAAQ,EAAE;AAAZ,WAAb,CAAjB;AACAX,UAAAA,OAAO,CAAC4B,IAAR,CAAc,GAAE7B,KAAK,CAAC8B,IAAK,EAA3B;AACAhC,UAAAA,KAAK,CAACiC,WAAN,CAAkB;AAAEC,YAAAA,KAAK,EAAE,IAAT;AAAeC,YAAAA,OAAO,EAAE,2BAAxB;AAAqDC,YAAAA,KAAK,EAAE;AAA5D,WAAlB;AACAnC,UAAAA,iBAAiB,CAAC,UAAD,EAAa;AAAEa,YAAAA,QAAQ,EAAE;AAAZ,WAAb,CAAjB;AACH,SALD,MAKO;AACHd,UAAAA,KAAK,CAACiC,WAAN,CAAkB;AAAEC,YAAAA,KAAK,EAAE,IAAT;AAAeC,YAAAA,OAAO,EAAE,2CAAxB;AAAqEC,YAAAA,KAAK,EAAE;AAA5E,WAAlB;AACH;AACJ;AACJ;AACJ,GA/BD;;AAkCA,sBACI,uDACI;AAAK,IAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI;AAAK,IAAA,SAAS,EAAG,SAAQlC,KAAK,CAACkB,KAAN,IAAelB,KAAK,CAACY,QAArB,GAAgC,SAAhC,GAA4C,MAAO,EAA5E;AAA+E,IAAA,EAAE,EAAC,cAAlF;AAAiG,IAAA,QAAQ,EAAC,QAA1G;AAAmH,IAAA,QAAQ,EAAC,IAA5H;AAAiI,uBAAgB,mBAAjJ;AAAqK,mBAAY,MAAjL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,oCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AACI,IAAA,IAAI,EAAC,QADT;AAEI,IAAA,SAAS,EAAC,WAFd;AAGI,uBAAgB,OAHpB;AAII,kBAAW,OAJf;AAKI,IAAA,OAAO,EAAEK,UALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,eAUI;AAAK,IAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2EAFJ,CAVJ,EAeQjB,KAAK,CAACkB,KAAN,gBACI;AAAM,IAAA,QAAQ,EAAEL,YAAY,CAACM,SAAD,CAA5B;AAAyC,IAAA,SAAS,EAAC,YAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,+CACQP,QAAQ,CAAC,OAAD,CADhB;AAEI,IAAA,IAAI,EAAC,OAFT;AAGI,IAAA,SAAS,EAAC,cAHd;AAII,IAAA,EAAE,EAAC,oBAJP;AAKI,IAAA,WAAW,EAAC,aALhB;AAMI,wBAAiB,WANrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADJ,eASI;AAAG,IAAA,SAAS,EAAEG,MAAM,CAACV,KAAP,IAAgB,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA4CU,MAAM,CAACV,KAAnD,kDAA4C,cAAc4B,OAA1D,CATJ,CADJ,eAYI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,+CACQrB,QAAQ,CAAC,UAAD,CADhB;AAEI,IAAA,IAAI,EAAC,UAFT;AAGI,IAAA,SAAS,EAAC,cAHd;AAII,IAAA,EAAE,EAAC,uBAJP;AAKI,IAAA,WAAW,EAAC,gBALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADJ,eAQI;AAAG,IAAA,SAAS,EAAEG,MAAM,CAACP,QAAP,IAAmB,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAA+CO,MAAM,CAACP,QAAtD,qDAA+C,iBAAiByB,OAAhE,CARJ,CAZJ,eAuBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAG,IAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,CAvBJ,eA0BI;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,SAAS,EAAC,2BAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,CA1BJ,CADJ,gBAgCI;AAAM,IAAA,QAAQ,EAAEpB,YAAY,CAACM,SAAD,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,+CACQP,QAAQ,CAAC,OAAD,CADhB;AAEI,IAAA,IAAI,EAAC,OAFT;AAGI,IAAA,SAAS,EAAC,cAHd;AAII,IAAA,EAAE,EAAC,oBAJP;AAKI,wBAAiB,WALrB;AAMI,IAAA,WAAW,EAAC,aANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADJ,eASI;AAAG,IAAA,SAAS,EAAEG,MAAM,CAACV,KAAP,IAAgB,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAA4CU,MAAM,CAACV,KAAnD,mDAA4C,eAAc4B,OAA1D,CATJ,CADA,eAYA;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,+CACQrB,QAAQ,CAAC,UAAD,CADhB;AAEI,IAAA,IAAI,EAAC,UAFT;AAGI,IAAA,SAAS,EAAC,cAHd;AAII,IAAA,EAAE,EAAC,uBAJP;AAKI,IAAA,WAAW,EAAC,gBALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADJ,eAQI;AAAG,IAAA,SAAS,EAAEG,MAAM,CAACP,QAAP,IAAmB,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA+CO,MAAM,CAACP,QAAtD,sDAA+C,kBAAiByB,OAAhE,CARJ,CAZA,eAsBA;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,+CACQrB,QAAQ,CAAC,MAAD,CADhB;AAEI,IAAA,IAAI,EAAC,MAFT;AAGI,IAAA,SAAS,EAAC,cAHd;AAII,IAAA,EAAE,EAAC,uBAJP;AAKI,IAAA,WAAW,EAAC,YALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADJ,eAQI;AAAG,IAAA,SAAS,EAAEG,MAAM,CAACN,IAAP,IAAe,WAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAA2CM,MAAM,CAACN,IAAlD,iDAA2C,aAAawB,OAAxD,CARJ,CAtBA,eAgCA;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,+CACQrB,QAAQ,CAAC,QAAD,CADhB;AAEI,IAAA,IAAI,EAAC,MAFT;AAGI,IAAA,SAAS,EAAC,cAHd;AAII,IAAA,EAAE,EAAC,uBAJP;AAKI,IAAA,WAAW,EAAC,qBALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADJ,eAQI;AAAG,IAAA,SAAS,EAAEG,MAAM,CAACJ,MAAP,IAAiB,WAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAA6CI,MAAM,CAACJ,MAApD,mDAA6C,eAAesB,OAA5D,CARJ,CAhCA,eA0CA;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAQ,IAAA,SAAS,EAAC,iBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,CA1CA,CA/CZ,CADJ,CADJ,CADJ,CAFJ,CADJ;AA0GH,CAhKD;;AAkKA,eAAepC,UAAf","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\nimport ContextApi from '../../context-api/context-api';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from \"yup\";\nimport { useForm } from 'react-hook-form';\n// import { useHistory } from 'react-router-dom';\nimport { useNavigate } from 'react-router-dom';\nimport { Credslogin, CredsRegister } from '../../api-service/api-service';\nimport { ToastContainer, toast } from 'react-toastify';\n\nconst LoginModal = (props) => {\n\n    const { dispatchUserEvent, state } = useContext(ContextApi);\n    const history = useHistory();\n    const schema = yup.object({\n        email: yup.string().required('Please enter Email'),\n        password: yup.string().required('Please enter Password'),\n        name: state.label === 'register' && yup.string().required('Please enter Name'),\n        mobile: state.label === 'register' && yup.string().required('Please enter Mobile Number')\n    }).required();\n    \n    const { register, handleSubmit,  formState:{ errors }} = useForm({\n        resolver: yupResolver(schema)\n    });\n    \n    const closeModal = () => {\n        if( state.login) dispatchUserEvent('LOGIN', { login: false });\n        else dispatchUserEvent('REGISTER', { register: false });\n    }\n\n    const loginForm = async (data) => {\n        console.log(data)\n        let response; \n        if (state.label === 'login') {\n            response = await Credslogin(data);\n            if (response) {\n                if (response.status === 200) {\n                    dispatchUserEvent('LOGIN', { login: false });\n                    localStorage.setItem('user_data', JSON.stringify(response.data));\n                    history.push(`${state.path}`);\n                    props.handleSnack({ snack: true, message: 'LogIn successfully', class: 'success' });\n                    dispatchUserEvent('LOGIN', { login: false });\n                } else { \n                    props.handleSnack({ snack: true, message: 'Please SignUp', class: 'error' });    \n                }   \n            } else {\n                props.handleSnack({ snack: true, message: 'Invalid Username & Password', class: 'error' });\n            }\n        } else {\n            response = await CredsRegister(data);\n            if (response) {\n                if (response.status === 200) {\n                    dispatchUserEvent('REGISTER', { register: false });\n                    history.push(`${state.path}`);\n                    props.handleSnack({ snack: true, message: 'User created successfully', class: 'success' });\n                    dispatchUserEvent('REGISTER', { register: false });\n                } else { \n                    props.handleSnack({ snack: true, message: 'Error, Kindly login again after sometime.', class: 'error' });\n                }   \n            }\n        }\n    }\n\n    \n    return (\n        <>\n            <div className=\"modal-backdrop fade show\"></div>\n            <div className={`modal ${state.login || state.register ? 'd-block' : 'fade'}`} id=\"exampleModal\" backdrop=\"static\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                <div className=\"modal-dialog modal-dialog-centered\">\n                    <div className=\"modal-content\">\n                        <div className=\"modal-body\">\n                            <div className=\"d-flex justify-content-end\">\n                                <button\n                                    type=\"button\"\n                                    className=\"btn-close\"\n                                    data-bs-dismiss=\"modal\"\n                                    aria-label=\"Close\"\n                                    onClick={closeModal}\n                                ></button>\n                            </div>\n                            <div className=\"text-center my-3 login-title\">\n                                <h1 className=\"\">Lets Travel</h1>\n                                <p>Think for a budget friendly rooms and we are here to make it happen</p>\n                            </div>\n                            {\n                                state.login ?\n                                    <form onSubmit={handleSubmit(loginForm)} className=\"form-login\">\n                                        <div className=\"mb-4\">\n                                            <input\n                                                {...register(\"email\")}\n                                                type=\"email\"\n                                                className=\"form-control\"\n                                                id=\"exampleInputEmail1\"\n                                                placeholder=\"Enter Email\"\n                                                aria-describedby=\"emailHelp\"\n                                            />\n                                            <p className={errors.email && 'log-error'}>{errors.email?.message}</p>\n                                        </div>\n                                        <div className=\"mb-4\">\n                                            <input\n                                                {...register(\"password\")}\n                                                type=\"password\"\n                                                className=\"form-control\"\n                                                id=\"exampleInputPassword1\"\n                                                placeholder=\"Enter Password\"\n                                            />\n                                            <p className={errors.password && 'log-error'}>{errors.password?.message}</p>\n                                        </div>\n                                        {/* Forgot Password */}\n                                        <div>\n                                            <a href=\"#\">Forgot Password?</a>\n                                        </div>\n                                        <div className=\"d-flex justify-content-end\">\n                                            <button type=\"submit\" className=\"btn btn-primary btn-login\">Log In</button>\n                                        </div>\n                                    </form>\n                                    : \n                                    <form onSubmit={handleSubmit(loginForm)}>\n                                    <div className=\"mb-3\">\n                                        <input\n                                            {...register(\"email\")}\n                                            type=\"email\"\n                                            className=\"form-control\"\n                                            id=\"exampleInputEmail1\"\n                                            aria-describedby=\"emailHelp\"\n                                            placeholder=\"Enter Email\"\n                                        />\n                                        <p className={errors.email && 'log-error'}>{errors.email?.message}</p>\n                                    </div>\n                                    <div className=\"mb-3\">\n                                        <input\n                                            {...register(\"password\")}\n                                            type=\"password\"\n                                            className=\"form-control\"\n                                            id=\"exampleInputPassword1\"\n                                            placeholder=\"Enter Password\"\n                                        />\n                                        <p className={errors.password && 'log-error'}>{errors.password?.message}</p>\n                                    </div>\n                                    <div className=\"mb-3\">\n                                        <input\n                                            {...register(\"name\")}\n                                            type=\"text\"\n                                            className=\"form-control\"\n                                            id=\"exampleInputPassword1\"\n                                            placeholder=\"Enter Name\"\n                                        />\n                                        <p className={errors.name && 'log-error'}>{errors.name?.message}</p>\n                                    </div>\n                                    <div className=\"mb-3\">\n                                        <input\n                                            {...register(\"mobile\")}\n                                            type=\"text\"\n                                            className=\"form-control\"\n                                            id=\"exampleInputPassword1\"\n                                            placeholder=\"Enter Mobile Number\"\n                                        />\n                                        <p className={errors.mobile && 'log-error'}>{errors.mobile?.message}</p>\n                                    </div>\n                                    <div className=\"d-flex justify-content-end\">\n                                        <button className=\"btn btn-primary\">Sign Up</button>\n                                    </div>\n                                </form>\n                            }\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </>\n    )\n}\n\nexport default LoginModal"]},"metadata":{},"sourceType":"module"}